package amiibo

import (
	"encoding/binary"
	"fmt"
	"testing"
)

func TestExtractBits(t *testing.T) {
	got := fmt.Sprintf("%032b", extractBits(1259835, 6, 3))
	want := "00000000000000000000000000100111"

	if got != want {
		t.Errorf("extractBits: got %s, want %s", got, want)
	}
}

func TestToPlainStringLittleEndian(t *testing.T) {
	got := utf16ToPlainString([]byte{
		0x74, 0x00, 0x65, 0x00, 0x73, 0x00, 0x74, 0x00, 0x65, 0x00, 0x72, 0x00, 0x20,
		0x00, 0x74, 0x00, 0x65, 0x00, 0x73, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6e, 0x00,
		0x67, 0x00,
	}, binary.LittleEndian)
	want := "tester testing"

	if got != want {
		t.Errorf("utf16ToPlainString: got %s, want %s", got, want)
	}
}

func TestToPlainStringBigEndian(t *testing.T) {
	got := utf16ToPlainString([]byte{
		0x00, 0x74, 0x00, 0x65, 0x00, 0x73, 0x00, 0x74, 0x00, 0x65, 0x00, 0x72, 0x00,
		0x20, 0x00, 0x74, 0x00, 0x65, 0x00, 0x73, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6e,
		0x00, 0x67,
	}, binary.BigEndian)
	want := "tester testing"

	if got != want {
		t.Errorf("utf16ToPlainString: got %s, want %s", got, want)
	}
}